const duplexify = require('duplexify');


function std_listen (url, options, callback) {
    let stdio_stream = duplexify (process.stdout, process.stdin);
    const serv = {
        on: function (evname, cb) {
            if (evname==='connection')
                cb(stdio_stream);
        }
    };
    callback && callback(null, serv);
    return serv;
}


function std_connect (url, options, callback) {
    let stdio_stream = duplexify (process.stdout, process.stdin);
    callback(null, stdio_stream);
}


module.exports = {

    listen: std_listen,
    connect: std_connect

};